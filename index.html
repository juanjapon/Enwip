
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="/Enwipweb/style.css">
<link rel="shortcut icon" href="/Enwipweb/imagenes/ENWIP_favicon.ico">
<title>ENWIP</title>
<script language="JavaScript"><!--

function activarUsuario(){

	
}

function validarUsuario(){
			document.getElementById("vpass").innerHTML="";
			document.getElementById("vname").innerHTML="";

            
			var nom=document.datos.user.value;
			var passw=document.datos.pass.value;	
							 
			var listo=true;

			
			if(nom==""){
				document.getElementById("vname").innerHTML="<font color=\"red\">Este campo no puede estar vacio</font>";
				listo=false;
				}
			if(passw==""){
				document.getElementById("vpass").innerHTML="<font color=\"red\">Este campo no puede estar vacio</font>";
				listo=false;
				}
	
			if(listo){
				enviarDatos();
				}

			}
		
		function enviarDatos(){
			if (window.ActiveXObject)
       	  {   xhr = new ActiveXObject("Microsoft.XMLHttp");      
        	  }
        else if ((window.XMLHttpRequest) || (typeof XMLHttpRequest)!=undefined)
            {         xhr = new XMLHttpRequest();
            }
        else
            { alert("Su navegador no tiene soporte para AJAX");
              return;
            }
			
				xhr.open("POST","http://localhost:8080/Enwipweb/ServletValidarUsuario",true);
				xhr.onreadystatechange = procesaResultado;
			       // Definición del tipo de contenido del cuerpo para formularios HTML
			          xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
			          
			          var datos = obtenerDatos();
			       // Se envían los datos en el cuerpo de la petición
			          xhr.send(datos);
			   }

		 function procesaResultado()
	        { 
				
		        if (xhr.readyState == 4) 
                  {  
					
	                  var res=xhr.responseText;

						if(res=="encontrado"){
							document.location.href="http://localhost:8080/Enwipweb/network.html";
						}
						if(res=="falta activar"){
							document.location.href="http://localhost:8080/Enwipweb/activacionCuenta.html";
							}
						
			     document.getElementById("vpass").innerHTML=res;
			
				  
	          }
		          
	          
	        }
		 
		function obtenerDatos()
	        { var controles = document.forms[0].elements;
			          var datos = new Array();
			          var cad = "";
			          for (var i=0; i<controles.length; i++)
			          {    cad = encodeURIComponent(controles[i].name)+"=";
			               cad += encodeURIComponent(controles[i].value);
			               datos.push(cad);
			          }
			       // Se forma la cadena con el método join() del array para evitar múltiples concatenaciones
			          cad = datos.join("&");
			          return cad;
			        }

		function handleEnter (field, event) {
		    var keyCode = event.keyCode ? event.keyCode : event.which ? event.which : event.charCode;
		    if (keyCode == 13) {
		    	validarUsuario();
		        return false;
		    }
		    else
		    return true;
		} 
		--></script>
</head>
<body>
	
        <div id="BG_ingreso">
        <div id="Central">
       <div id="logo_ingreso">

            	<img src="/Enwipweb/imagenes/logo_enwipIngreso.png" width="482" height="165">

            </div><!--logo_ingreso-->
				<div id="video">

            	<img src="/Enwipweb/imagenes/video.jpg" width="449" height="274">

            </div><!--video-->

      
      <div id="cuadro_ingreso">
        <form name="datos" id="C_interno" action="">
      
      <table width="252" border="0" cellspacing="0" cellpadding="0">
                  	      <tr>
            	        <td height="37" align="left" valign="middle"><h1>Ingreso</h1></td>
          	        </tr>
                  	      <tr>
            	        <td height="32" align="left" valign="middle" class="txt_ingreso"><img src="/Enwipweb/imagenes/bts/icon_mail.png" width="12" height="15"> Dirección de Correo:</td>
          	        </tr>
     				 <tr>
            	        <td height="37"><label for="user"></label>
           	            <input name="user" type="text" class="textform" id="textfield" onkeypress="return handleEnter(this, event)"></td><div id="vname"></div>
          	        </tr>
 					<tr>
            	        <td height="32" align="left" valign="middle" class="txt_ingreso"><img src="/Enwipweb/imagenes/bts/icon_password.png" width="16" height="16"> Password:</td>
          	        </tr>
            	      <tr>
            	        <td height="37"><input name="pass" type="password" class="textform" id="textfield2" onkeypress="return handleEnter(this, event)"></td><div id="vpass"></div>
          	        </tr>
            	      <tr>
            	        <td height="14"></td>
           	          </tr>
           	             <tr>
            	        <td height="35" align="right">
                        <input name="entrar" type="button" class="bt_enviar" id="button" value="Enviar" onClick="validarUsuario()" onkeypress="return handleEnter(this, event)">
                        </td>
           	          </tr>
           	           <tr>
            	        <td height="19">&nbsp;</td>
           	          </tr>
            	      <tr>
            	        <td height="22" align="right" valign="middle" class="registro_inicio"><a href="/Enwipweb/formulario.html">Registrarse</a></td>
           	          </tr>
           	          <tr>
            	        <td height="22" align="right" valign="middle" class="registro_inicio"><a href="/Enwipweb/renovarPassword.html">¿Haz olvidado tu contraseña?</a></td>
           	          </tr>
           	          


            </table>
            	
               
        </form></div></div><div id="resultado"></div>
        </div><!--BG_ingreso-->
        
        <div id="footer">
       <div id="bts_inf" class="bts_inf">       
        <a href="/Enwipweb/AcercaEnwip.html" class="otrosTerminos">Acerca ENWIP</a><a href="/Enwipweb/Aliados.html" class="otrosTerminos">Aliados ENWIP</a><a href="/Enwipweb/privacidad.html" class="otrosTerminos">Privacidad</a><a href="/Enwipweb/terminos.html" class="otrosTerminos">Terminos de Uso</a><a href="/Enwipweb/PublicidadPrensa.html" class="otrosTerminos">Publicidad y Prensa</a><a href="/Enwipweb/Olaborales.html" class="otrosTerminos">Oportunidades Laborales con ENWIP</a><a href="/Enwipweb/ayuda.html" class="otrosTerminos">Ayuda</a><a href="/Enwipweb/contactenos.html" class="otrosTerminos">Contactenos</a><a href="http://www.enwip.org" target="_blank" class="otrosTerminos">ENWIP Social</a><a href="/Enwipweb/mapadelsitio.html" class="otrosTerminos">Mapa del Sitio</a>
        </div>
        </div>
   
</body>
</html>